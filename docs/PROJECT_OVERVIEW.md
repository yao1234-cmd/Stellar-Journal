# æ˜Ÿè¿¹ (Stellar Journal) - é¡¹ç›®æ¦‚è§ˆ ğŸŒŸ

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

**æ˜Ÿè¿¹**æ˜¯ä¸€æ¬¾èåˆæƒ…æ„Ÿè®¡ç®—ä¸3Dæ•°æ®å¯è§†åŒ–çš„æ²»æ„ˆç³»è®°å½•åº”ç”¨ã€‚å®ƒé€šè¿‡AIè§£æç”¨æˆ·è®°å½•çš„æ–‡å­—æˆ–è¯­éŸ³ï¼ŒåŠ¨æ€ç”Ÿæˆå¹¶æ¼”åŒ–ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„3Dæ˜Ÿçƒã€‚

### æ ¸å¿ƒç†å¿µ
> è®©æ¯ä¸€æ¬¡å†…å¿ƒæ³¢åŠ¨ï¼Œéƒ½æˆä¸ºæ„å»ºç‹¬ç‰¹å®‡å®™çš„æ˜Ÿè¾°

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. ä¸‰ç§è®°å½•ç±»å‹

| ç±»å‹ | è¯´æ˜ | è§†è§‰è¡¨ç° | AIå¤„ç† |
|------|------|----------|--------|
| ğŸ’— å¿ƒæƒ… | è®°å½•å½“å‰çš„æƒ…ç»ªçŠ¶æ€ | å†³å®šæ˜Ÿçƒå¤§æ°”å±‚é¢œè‰² | æƒ…æ„Ÿåˆ†æ + è‰²å½©æ˜ å°„ |
| âœ¨ çµæ„Ÿ | æ•æ‰çµå…‰ä¸€é—ªçš„æƒ³æ³• | åŒ–ä¸ºç¯ç»•æ˜Ÿçƒçš„æ˜Ÿæ˜Ÿ | å…³é”®è¯æå– + ä½ç½®è®¡ç®— |
| ğŸŒ³ æ€è€ƒ | æ·±åº¦æ€è€ƒä¸æ²‰æ·€ | é•¿æˆæ˜Ÿçƒè¡¨é¢çš„æ ‘æœ¨ | ä¸»é¢˜èšç±» + ç”Ÿé•¿ç®—æ³• |

### 2. æƒ…æ„Ÿå¯è§†åŒ–ç³»ç»Ÿ

**æƒ…ç»ªäºŒç»´æ¨¡å‹**
- **æ•ˆä»· (Valence)**: 0-1ï¼Œæ¶ˆæåˆ°ç§¯æ
- **å”¤èµ·åº¦ (Arousal)**: 0-1ï¼Œå¹³é™åˆ°æ¿€åŠ¨

**è‰²å½©æ˜ å°„ç®—æ³•**
```
é«˜æ•ˆä»· + é«˜å”¤èµ· (å…´å¥‹/å¿«ä¹)  â†’ æ˜äº®é»„æ©™è‰²
é«˜æ•ˆä»· + ä½å”¤èµ· (å¹³é™/æ»¡è¶³)  â†’ è–„è·ç»¿æ·¡è“è‰²
ä½æ•ˆä»· + é«˜å”¤èµ· (ç„¦è™‘/æ„¤æ€’)  â†’ æ·±çº¢æš—ç´«è‰²
ä½æ•ˆä»· + ä½å”¤èµ· (æ‚²ä¼¤/ä½è½)  â†’ ç°è“æš—ç°è‰²
```

### 3. 3D æ˜Ÿçƒç”Ÿæ€

- **ä¸»æ˜Ÿçƒ**: åŸºç¡€åœ°è¡¨ï¼Œæ‰¿è½½æ€è€ƒæ ‘æœ¨
- **å¤§æ°”å±‚**: åŠé€æ˜æ¸å˜ï¼Œåæ˜ å½“æ—¥å¿ƒæƒ…
- **æ˜Ÿæ˜Ÿè½¨é“**: çµæ„Ÿåœ¨æ˜Ÿçƒå‘¨å›´å…¬è½¬
- **åœ°è¡¨æ ‘æœ¨**: åŒä¸»é¢˜æ€è€ƒèšé›†ç”Ÿé•¿

### 4. æ—¶å…‰è½´ç³»ç»Ÿ

- æŸ¥çœ‹å†å²è®°å½•
- é¢œè‰²å…‰è°±å±•ç¤ºæƒ…ç»ªè¶‹åŠ¿
- ä¸€é”®åˆ‡æ¢åˆ°è¿‡å»æŸå¤©çš„æ˜ŸçƒçŠ¶æ€

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆæ€»è§ˆ

```
å‰ç«¯ (Frontend)
â”œâ”€â”€ Next.js 14 (App Router)
â”œâ”€â”€ React 18
â”œâ”€â”€ TypeScript
â”œâ”€â”€ React Three Fiber (3Dæ¸²æŸ“)
â”œâ”€â”€ Drei (Three.js è¾…åŠ©åº“)
â”œâ”€â”€ Tailwind CSS (æ ·å¼)
â”œâ”€â”€ Framer Motion (åŠ¨ç”»)
â””â”€â”€ Zustand (çŠ¶æ€ç®¡ç†)

åç«¯ (Backend)
â”œâ”€â”€ Python 3.11+
â”œâ”€â”€ FastAPI (Webæ¡†æ¶)
â”œâ”€â”€ SQLAlchemy (ORM)
â”œâ”€â”€ PostgreSQL (æ•°æ®åº“)
â”œâ”€â”€ Redis (ç¼“å­˜)
â”œâ”€â”€ Alembic (æ•°æ®åº“è¿ç§»)
â””â”€â”€ OpenAI API (AIæœåŠ¡)
    â”œâ”€â”€ GPT-4o mini (æƒ…æ„Ÿåˆ†æ)
    â””â”€â”€ Whisper (è¯­éŸ³è½¬æ–‡å­—)
```

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·ç•Œé¢å±‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ 3Dæ˜Ÿçƒåœºæ™¯â”‚  â”‚  è®°å½•é¢æ¿ â”‚  â”‚ æ—¶å…‰è½´   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  çŠ¶æ€ç®¡ç†å±‚ (Zustand)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ planetStore  â”‚        â”‚ recordStore  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ HTTP/REST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   API ç½‘å…³å±‚ (FastAPI)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ Records  â”‚  â”‚  Planet  â”‚  â”‚  Stats   â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ä¸šåŠ¡é€»è¾‘å±‚ (Services)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ EmotionService   â”‚  â”‚  PlanetService   â”‚            â”‚
â”‚  â”‚ - AIæƒ…æ„Ÿåˆ†æ     â”‚  â”‚  - ä½ç½®è®¡ç®—      â”‚            â”‚
â”‚  â”‚ - é¢œè‰²æ˜ å°„       â”‚  â”‚  - çŠ¶æ€èšåˆ      â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚  â”‚ WhisperService   â”‚                                   â”‚
â”‚  â”‚ - è¯­éŸ³è½¬æ–‡å­—     â”‚                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ•°æ®æŒä¹…å±‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ PostgreSQL   â”‚        â”‚    Redis     â”‚              â”‚
â”‚  â”‚ - è®°å½•æ•°æ®   â”‚        â”‚  - ç¼“å­˜      â”‚              â”‚
â”‚  â”‚ - ç”¨æˆ·æ•°æ®   â”‚        â”‚  - ä¼šè¯      â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å¤–éƒ¨æœåŠ¡                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚         OpenAI API                    â”‚              â”‚
â”‚  â”‚  - GPT-4o mini (æƒ…æ„Ÿåˆ†æ)           â”‚              â”‚
â”‚  â”‚  - Whisper (è¯­éŸ³è¯†åˆ«)               â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
stellar-journal/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/               # APIè·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ v1/
â”‚   â”‚   â”‚       â”œâ”€â”€ records.py # è®°å½•æ¥å£
â”‚   â”‚   â”‚       â””â”€â”€ planet.py  # æ˜Ÿçƒæ¥å£
â”‚   â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py      # é…ç½®ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ database.py    # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”‚   â””â”€â”€ redis_client.py# Rediså®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py        # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ record.py      # è®°å½•æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ schemas/           # Pydanticæ¨¡å¼
â”‚   â”‚   â”‚   â”œâ”€â”€ record.py      # è®°å½•æ¨¡å¼
â”‚   â”‚   â”‚   â”œâ”€â”€ planet.py      # æ˜Ÿçƒæ¨¡å¼
â”‚   â”‚   â”‚   â””â”€â”€ emotion.py     # æƒ…æ„Ÿæ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ emotion_service.py   # æƒ…æ„Ÿåˆ†æ
â”‚   â”‚   â”‚   â”œâ”€â”€ whisper_service.py   # è¯­éŸ³è½¬å†™
â”‚   â”‚   â”‚   â””â”€â”€ planet_service.py    # æ˜Ÿçƒè®¡ç®—
â”‚   â”‚   â””â”€â”€ main.py            # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ alembic/               # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ requirements.txt       # Pythonä¾èµ–
â”‚   â””â”€â”€ .env                   # ç¯å¢ƒå˜é‡
â”‚
â”œâ”€â”€ frontend/                  # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/              # Next.js App Router
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx      # ä¸»é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx    # å¸ƒå±€
â”‚   â”‚   â”‚   â””â”€â”€ globals.css   # å…¨å±€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ components/       # Reactç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ planet/       # 3Dæ˜Ÿçƒç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PlanetScene.tsx    # åœºæ™¯å®¹å™¨
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Planet.tsx         # ä¸»æ˜Ÿçƒ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StarElement.tsx    # æ˜Ÿæ˜Ÿå…ƒç´ 
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TreeElement.tsx    # æ ‘æœ¨å…ƒç´ 
â”‚   â”‚   â”‚   â””â”€â”€ ui/           # UIç»„ä»¶
â”‚   â”‚   â”‚       â”œâ”€â”€ RecordPanel.tsx    # è®°å½•é¢æ¿
â”‚   â”‚   â”‚       â”œâ”€â”€ TimelinePanel.tsx  # æ—¶å…‰è½´
â”‚   â”‚   â”‚       â””â”€â”€ StatsPanel.tsx     # ç»Ÿè®¡é¢æ¿
â”‚   â”‚   â”œâ”€â”€ lib/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â””â”€â”€ api.ts        # APIå®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ stores/           # çŠ¶æ€ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ planetStore.ts # æ˜ŸçƒçŠ¶æ€
â”‚   â”‚       â””â”€â”€ recordStore.ts # è®°å½•çŠ¶æ€
â”‚   â”œâ”€â”€ public/               # é™æ€èµ„æº
â”‚   â”œâ”€â”€ package.json          # Nodeä¾èµ–
â”‚   â”œâ”€â”€ tsconfig.json         # TypeScripté…ç½®
â”‚   â”œâ”€â”€ tailwind.config.ts    # Tailwindé…ç½®
â”‚   â””â”€â”€ .env.local            # ç¯å¢ƒå˜é‡
â”‚
â”œâ”€â”€ docs/                     # æ–‡æ¡£
â”‚   â”œâ”€â”€ PROJECT_OVERVIEW.md   # é¡¹ç›®æ¦‚è§ˆï¼ˆæœ¬æ–‡æ¡£ï¼‰
â”‚   â”œâ”€â”€ DEVELOPMENT.md        # å¼€å‘æŒ‡å—
â”‚   â””â”€â”€ QUICKSTART.md         # å¿«é€Ÿå¼€å§‹
â”‚
â”œâ”€â”€ start-dev.ps1             # Windowså¯åŠ¨è„šæœ¬
â”œâ”€â”€ README.md                 # é¡¹ç›®è¯´æ˜
â””â”€â”€ .gitignore               # Gitå¿½ç•¥æ–‡ä»¶
```

## ğŸ”‘ æ ¸å¿ƒç®—æ³•

### 1. æƒ…æ„Ÿåˆ†ææµç¨‹

```python
def analyze_emotion(text: str) -> EmotionData:
    """
    1. è°ƒç”¨ GPT-4o mini åˆ†ææ–‡æœ¬æƒ…æ„Ÿ
    2. è¿”å›äºŒç»´æƒ…æ„Ÿæ¨¡å‹å‚æ•° (valence, arousal)
    3. æ˜ å°„åˆ°å…·ä½“æƒ…ç»ªæ ‡ç­¾
    """
    prompt = """
    åˆ†ææ–‡æœ¬æƒ…æ„Ÿï¼Œè¿”å›ï¼š
    - valence: 0-1 (æ¶ˆæåˆ°ç§¯æ)
    - arousal: 0-1 (å¹³é™åˆ°æ¿€åŠ¨)
    - primary_emotion: ä¸»è¦æƒ…ç»ª
    - emotion_scores: å„æƒ…ç»ªå¾—åˆ†
    """
    # ... OpenAI API è°ƒç”¨ ...
```

### 2. é¢œè‰²æ˜ å°„ç®—æ³•

```python
def emotion_to_color(valence: float, arousal: float) -> str:
    """
    åŸºäº HSL è‰²å½©ç©ºé—´æ˜ å°„ï¼š
    - Hue (è‰²ç›¸): ç”± valence å†³å®š
    - Saturation (é¥±å’Œåº¦): ç”± arousal å†³å®š
    - Lightness (äº®åº¦): ç”± valence å’Œ arousal ç»„åˆå†³å®š
    """
    if valence >= 0.5:
        hue = 60 + (valence - 0.5) * 2 * 60  # é»„åˆ°ç»¿
    else:
        hue = 240 + valence * 2 * 60  # è“åˆ°ç´«
    
    saturation = 0.3 + arousal * 0.6
    lightness = 0.4 + valence * 0.4
    
    return hsl_to_hex(hue, saturation, lightness)
```

### 3. æ˜Ÿæ˜Ÿä½ç½®è®¡ç®—

```python
def calculate_star_position(index: int, total: int, date: datetime):
    """
    è®¡ç®—æ˜Ÿæ˜Ÿçš„è½¨é“å‚æ•°ï¼š
    - ä½¿ç”¨æ—¥æœŸä½œä¸ºéšæœºç§å­ï¼Œç¡®ä¿ä½ç½®ç¨³å®š
    - è½¨é“åŠå¾„: 1.5 - 3.0
    - è§’åº¦å‡åŒ€åˆ†å¸ƒ
    - è½¬æ¢ä¸ºç¬›å¡å°”åæ ‡
    """
    orbit_radius = 1.5 + random() * 1.5
    orbit_angle = (360 / total * index + random() * 30) % 360
    
    x = orbit_radius * cos(angle_rad)
    z = orbit_radius * sin(angle_rad)
    y = random() * 0.5 - 0.25  # è½»å¾®æµ®åŠ¨
    
    return {x, y, z, orbit_radius, orbit_angle}
```

### 4. æ¯æ—¥æƒ…æ„ŸåŠ æƒ

```python
def calculate_daily_emotion(emotions: List[EmotionData]):
    """
    æŒ‡æ•°è¡°å‡åŠ æƒå¹³å‡ï¼š
    - æœ€è¿‘çš„è®°å½•æƒé‡æœ€é«˜
    - æƒé‡ = 0.8^(n-i-1)
    - å½’ä¸€åŒ–åè®¡ç®—åŠ æƒå¹³å‡
    """
    for i, emotion in enumerate(emotions):
        weight = pow(0.8, n - i - 1)
        weighted_valence += emotion.valence * weight
        weighted_arousal += emotion.arousal * weight
    
    return normalized_valence, normalized_arousal
```

## ğŸ¨ UI/UX è®¾è®¡

### è§†è§‰é£æ ¼
- **ä¸»é¢˜**: æ²»æ„ˆç³»ã€ç§‘æŠ€æ„Ÿã€å®‡å®™ç¾å­¦
- **è‰²è°ƒ**: æ·±ç´«åˆ°é›è“æ¸å˜èƒŒæ™¯
- **ç»ç’ƒæ€æ•ˆæœ**: åŠé€æ˜æ¨¡ç³Šé¢æ¿
- **åŠ¨ç”»**: æµç•…çš„è¿‡æ¸¡å’Œæ‚¬æµ®æ•ˆæœ

### äº¤äº’è®¾è®¡
- **3Dåœºæ™¯**: å•æŒ‡æ—‹è½¬ã€åŒæŒ‡ç¼©æ”¾ã€æ»šè½®ç¼©æ”¾
- **å…ƒç´ æ‚¬åœ**: æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
- **å³æ—¶åé¦ˆ**: æäº¤è®°å½•åæ˜Ÿçƒç«‹å³æ›´æ–°
- **æµç•…åŠ¨ç”»**: Framer Motion é©±åŠ¨çš„è¿‡æ¸¡

## ğŸ“Š æ•°æ®åº“è®¾è®¡

### Users è¡¨
```sql
- id: UUID (ä¸»é”®)
- username: VARCHAR(50) UNIQUE
- email: VARCHAR(255) UNIQUE
- hashed_password: VARCHAR(255)
- created_at: TIMESTAMP
```

### Records è¡¨
```sql
- id: UUID (ä¸»é”®)
- user_id: UUID (å¤–é”®)
- type: ENUM(mood, spark, thought)
- content: TEXT
- audio_url: VARCHAR(512)
- emotion_analysis: JSON
- keywords: JSON
- theme_cluster: VARCHAR(100)
- color_hex: VARCHAR(7)
- position_data: JSON
- created_at: TIMESTAMP
```

## ğŸš€ API æ¥å£

### Records API

```
POST   /api/v1/records/          åˆ›å»ºè®°å½•
GET    /api/v1/records/          è·å–è®°å½•åˆ—è¡¨
GET    /api/v1/records/{id}      è·å–å•æ¡è®°å½•
DELETE /api/v1/records/{id}      åˆ é™¤è®°å½•
POST   /api/v1/records/transcribe è¯­éŸ³è½¬æ–‡å­—
```

### Planet API

```
GET /api/v1/planet/state        è·å–æ˜ŸçƒçŠ¶æ€
GET /api/v1/planet/history      è·å–å†å²æ•°æ®
GET /api/v1/planet/stats        è·å–ç»Ÿè®¡ä¿¡æ¯
```

## ğŸ“ˆ æœªæ¥è§„åˆ’

### Phase 2: ç”Ÿæ€æ„å»º
- [ ] å®Œæ•´è¯­éŸ³è¾“å…¥æ”¯æŒ
- [ ] æ›´å¤æ‚çš„æ€è€ƒèšç±»ç®—æ³•
- [ ] ç¯å¢ƒéŸ³æ•ˆç³»ç»Ÿ
- [ ] æ˜Ÿçƒå¿«ç…§åˆ†äº«

### Phase 3: æ´å¯Ÿä¸é™ªä¼´
- [ ] æƒ…ç»ªè¶‹åŠ¿åˆ†ææŠ¥å‘Š
- [ ] AIç”Ÿæˆçš„æœˆåº¦æ‘˜è¦
- [ ] å¤šç§æ˜Ÿçƒçš®è‚¤ä¸»é¢˜
- [ ] ç”¨æˆ·è‡ªå®šä¹‰é¢œè‰²æ˜ å°„

### æŠ€æœ¯ä¼˜åŒ–
- [ ] ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- [ ] WebSocket å®æ—¶æ›´æ–°
- [ ] æ€§èƒ½ä¼˜åŒ–ä¸ç¼“å­˜ç­–ç•¥
- [ ] ç§»åŠ¨ç«¯é€‚é… (iOS/Android)
- [ ] PWA æ”¯æŒ

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤å˜æ›´
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»º Pull Request

## ğŸ“ è®¸å¯è¯

MIT License

---

**è®©æ¯ä¸€æ¬¡å†…å¿ƒæ³¢åŠ¨ï¼Œéƒ½æˆä¸ºæ„å»ºç‹¬ç‰¹å®‡å®™çš„æ˜Ÿè¾° âœ¨**
